<?xml version="1.0"?>
        <robot name="phylax" xmlns:xacro="http://ros.org/wiki/xacro">
        <xacro:property name="PI" value="3.1415926535897931" />

        <xacro:property name="chassis_length" value="0.380" />
        <xacro:property name="chassis_width" value="0.310" />
        <xacro:property name="chassis_height" value="0.184" />

        <xacro:property name="wheel_radius" value="0.065" />
        <xacro:property name="wheel_width" value="0.060" />

        <link name="base_footprint">
                <visual>
                        <geometry>
                                <box size="0.38 0.310 0.000001"/>
                        </geometry>
                        <material name="grey">
                                <color rgba="0.5 0.5 0.5 0.5"/>
                        </material>
                </visual>
        </link>

        <link name="base_link">
                <collision>
                        <geometry>
                                <box size="0.39 0.188 0.19"/>
                        </geometry>
                </collision>
                <visual>
                        <origin xyz="0.0 0.0002 -0.018" rpy="${PI/2} 0 0"/>
                        <geometry>
                                <mesh filename="package://phylax_description/meshes/wild_thumper_6wd_chassis.stl" scale="0.001 0.001 0.001" />
                        </geometry>
                </visual>
                <inertial>
                        <origin xyz="0.00 0 -0.02" rpy="0 0 0"/>
                        <mass value="1"/>
                        <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
                </inertial>
        </link>
        
        <link name="mounting_plate">
                <visual>
                        <origin xyz="0.0 0 -0.078" rpy="${PI/2} 0 0"/>
                        <geometry>
                                <mesh filename="package://phylax_description/meshes/wild_thumper_6wd_top.stl" scale="0.001 0.001 0.001" />
                        </geometry>
                </visual>
        </link>
        <joint name="base_link_joint" type="fixed">
                <parent link="base_footprint"/>
                <child link="base_link"/>
                <origin xyz="0.0 0.0 0.062" rpy="0 0 0"/>
        </joint>
  
        <joint name="mounting_plate_joint" type="fixed">
                <parent link="base_link"/>
                <child link="mounting_plate"/>
                <origin xyz="0.0 0.0 0.06" rpy="0 0 0"/>
        </joint>
  
        <xacro:macro name="wheel" params="pos side xyz rpy xyzi rpyi">   
                <link name="${pos}_${side}_wheel">
                        <visual>
                                <origin xyz="${xyz}" rpy="${rpy}"/>
                                <geometry>
                                        <mesh filename="package://phylax_description/meshes/wild_thumper_6wd_wheel.stl" scale="0.001 0.001 0.001"/>
                                </geometry>
                        </visual>
                        <collision>
                                <origin xyz="0 0 0" rpy="0 0 0"/>
                                <geometry>
                                        <cylinder radius="0.06" length="0.06"/>
                                </geometry>
                        </collision>
                        <inertial>
                                <origin xyz="0 0 0" rpy="0 0 0"/>
                                <mass value="0.1"/>
                                <inertia ixx="0.005" ixy="0" ixz="0" iyy="0.005" iyz="0" izz="0.005"/>
                        </inertial>
                </link>

                <gazebo reference="${pos}_${side}_wheel">
                        <mu1 value="1.0"/>
                        <mu2 value="1.0"/>
                        <kp value="1000000.0" />
                        <kd value="1.0" />
                        <fdir1 value="1 0 0"/>
                </gazebo>

                <joint name="${pos}_${side}_wheel_joint" type="continuous">
                        <parent link="base_link"/>
                        <child link="${pos}_${side}_wheel"/>
                        <axis xyz="0 1 0"/>
                        <origin xyz="${xyzi}" rpy="${rpyi}"/>
                </joint>

                <transmission name="${pos}_${side}_wheel_trans" type="SimpleTransmission">
                        <type>transmission_interface/SimpleTransmission</type>
                        <joint name="${pos}_${side}_wheel_joint">
                                <hardwareInterface>VelocityJointInterface</hardwareInterface>
                        </joint>
                        <actuator name="{pos}_${side}_wheel_motor">
                                <mechanicalReduction>1</mechanicalReduction>
                        </actuator>
                </transmission>
        </xacro:macro>
  
        <xacro:wheel pos="front" side="left"  xyz="-0.15 -0.08 -0.02" rpy="${PI/2} 0 0" xyzi="0.15 0.08 0.0" rpyi="0 0 0" />
        <xacro:wheel pos="front" side="right" xyz="-0.15 0.08 0.02" rpy="${-PI/2} 0 0" xyzi="0.15 -0.08 0.0" rpyi="0 0 0" />
        <xacro:wheel pos="center" side="left"  xyz="-0.15 -0.08 -0.02" rpy="${PI/2} 0 0"  xyzi="0.0 0.08 0.0" rpyi="0 0 0"/>
        <xacro:wheel pos="center" side="right" xyz="-0.15 0.08 0.02" rpy="${-PI/2} 0 0"  xyzi="0.0 -0.08 0.0" rpyi="0 0 0"/>
        <xacro:wheel pos="rear" side="left"  xyz="-0.15 -0.08 -0.02" rpy="${PI/2} 0 0"  xyzi="-0.15 0.08 0.0" rpyi="0 0 0"/>
        <xacro:wheel pos="rear" side="right" xyz="-0.15 0.08 0.02" rpy="${-PI/2} 0 0" xyzi="-0.15 -0.08 0.0" rpyi="0 0 0"/>
  
        <gazebo>
                <plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">
                        <robotNamespace>/</robotNamespace>
                        <robotSimType>gazebo_ros_control/DefaultRobotHWSim</robotSimType>
                </plugin>
        </gazebo> 
 </robot>

